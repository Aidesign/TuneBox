var app=angular.module("TuneBox",["ngResource","ngRoute"]);app.config(["$routeProvider",function(e){e.when("/",{templateUrl:"partials/home.view.html",controller:"homeCtrl"}).when("/register",{templateUrl:"partials/register.view.html",controller:"registerCtrl"}).when("/login",{templateUrl:"partials/login.view.html",controller:"loginCtrl"}).otherwise({redirectTo:"/"})}]);(function(){angular.module("TuneBox").controller("homeCtrl",e);e.$inject=["$scope","authentication"];function e(e,n){}})();(function(){angular.module("TuneBox").controller("registerCtrl",e);e.$inject=["$scope","authentication","$location"];function e(e,n,t){if(n.isLoggedIn()){t.path("/")}e.register=function(){n.register(e.user).success(function(e){t.path("/")}).error(function(n){e.error=n.message})}}})();(function(){angular.module("TuneBox").service("authentication",e);e.$inject=["$window","$http"];function e(e,n){var t=function(n){e.localStorage["tunebox-token"]=n};var o=function(){return e.localStorage["tunebox-token"]};var r=function(){e.localStorage.removeItem("tunebox-token")};var i=function(e){return n.post("api/login",e).success(function(e){t(e.token)})};var u=function(e){return n.post("api/register",e).success(function(e){t(e.token)})};var l=function(){var n=o();if(n){var t=JSON.parse(e.atob(n.split(".")[1]));return t.exp>Date.now()/1e3}else{return null}};var a=function(){if(l()){var n=o();var t=JSON.parse(e.atob(n.split(".")[1]));return t}else{return false}};return{saveToken:t,getToken:o,logout:r,login:i,register:u,isLoggedIn:l,getUserInfo:a}}})();(function(){angular.module("TuneBox").controller("loginCtrl",e);e.$inject=["$scope","authentication","$location"];function e(e,n,t){if(n.isLoggedIn()){t.path("/")}e.error="";e.login=function(){n.login(e.user).success(function(e){t.path("/")}).error(function(n){e.error=n.message})}}})();(function(){angular.module("TuneBox").controller("navigationCtrl",e);e.$inject=["$scope","authentication"];function e(e,n){if(info=n.getUserInfo()){e.showLogin=false;e.test="Current user: "+info.email}else{e.showLogin=true}e.logout=function(){n.logout();e.test="logged out!";e.showLogin=true}}})();