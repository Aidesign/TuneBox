<<<<<<< HEAD
var app=angular.module("TuneBox",["ngResource","ngRoute"]);app.config(["$routeProvider",function(e){e.when("/",{templateUrl:"partials/home.view.html",controller:"homeCtrl"}).when("/register",{templateUrl:"partials/register.view.html",controller:"registerCtrl"}).when("/login",{templateUrl:"partials/login.view.html",controller:"loginCtrl"}).when("/room",{templateUrl:"partials/room.html"}).otherwise({redirectTo:"/"})}]);(function(){angular.module("TuneBox").controller("homeCtrl",e);e.$inject=["$scope","authentication"];function e(e,t){}})();(function(){angular.module("TuneBox").controller("registerCtrl",e);e.$inject=["$scope","authentication","$location"];function e(e,t,n){if(t.isLoggedIn()){n.path("/")}e.register=function(){t.register(e.user).success(function(e){n.path("/")}).error(function(t){e.error=t})}}})();(function(){angular.module("TuneBox").service("authentication",e);e.$inject=["$window","$http"];function e(e,t){var n=function(t){e.localStorage["tunebox-token"]=t};var o=function(){return e.localStorage["tunebox-token"]};var i=function(){e.localStorage.removeItem("tunebox-token")};var r=function(e){return t.post("api/login",e).success(function(e){n(e.token)})};var a=function(e){return t.post("api/register",e).success(function(e){n(e.token)})};var l=function(){var t=o();if(t){var n=JSON.parse(e.atob(t.split(".")[1]));return n.exp>Date.now()/1e3}else{return null}};var s=function(){if(l()){var t=o();var n=JSON.parse(e.atob(t.split(".")[1]));return n}else{return false}};return{saveToken:n,getToken:o,logout:i,login:r,register:a,isLoggedIn:l,getUserInfo:s}}})();(function(){angular.module("TuneBox").controller("loginCtrl",e);e.$inject=["$scope","authentication","$location"];function e(e,t,n){if(t.isLoggedIn()){n.path("/")}e.error="";e.login=function(){t.login(e.user).success(function(e){n.path("/")}).error(function(t){e.error=t.message})}}})();(function(){angular.module("TuneBox").controller("navigationCtrl",e);e.$inject=["$scope","authentication"];function e(e,t){if(info=t.getUserInfo()){e.showLogin=false;e.test="Current user: "+info.email}else{e.showLogin=true}e.logout=function(){t.logout();e.test="logged out!";e.showLogin=true}}})();(function(){angular.module("TuneBox").run(function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}).config(["$httpProvider",function(e){delete e.defaults.headers.common["X-Requested-With"]}]).service("youtubeService",e);e.$inject=["$window","$rootScope","$log"];function e(e,t,n){var o=this;var i={ready:false,player:null,playerId:null,videoId:null,videoTitle:null,playerHeight:"100%",playerWidth:"100%",state:"stopped"};var r=[];var a=[];e.onYouTubeIframeAPIReady=function(){n.info("Youtube API is ready");i.ready=true;o.bindPlayer("placeholder");o.loadPlayer();t.$apply()};this.bindPlayer=function(e){n.info("Binding to "+e);i.playerId=e};this.createPlayer=function(){n.info("Creating a new Youtube player for DOM id "+i.playerId+" and video "+i.videoId);return new YT.Player(i.playerId,{height:i.playerHeight,width:i.playerWidth,playerVars:{rel:0,showinfo:0}})};this.loadPlayer=function(){if(i.ready&&i.playerId){if(i.player){i.player.destroy()}i.player=o.createPlayer()}};this.launchPlayer=function(e,t){i.player.loadVideoById(e);i.videoId=e;i.videoTitle=t;return i};this.listResults=function(e,t){if(!t){r.length=0}for(var n=e.items.length-1;n>=0;n--){r.push({id:e.items[n].id.videoId,title:e.items[n].snippet.title,description:e.items[n].snippet.description,thumbnail:e.items[n].snippet.thumbnails.default.url,author:e.items[n].snippet.channelTitle})}return r};this.archiveVideo=function(e){a.unshift(e);return a};this.getYoutube=function(){return i};this.getResults=function(){return r};this.getHistory=function(){return a}}})();(function(){angular.module("TuneBox").controller("youtubeCtrl",e);e.$inject=["$scope","$http","$log","youtubeService"];function e(e,t,n,o){i();function i(){e.youtube=o.getYoutube();e.results=o.getResults();e.history=o.getHistory();e.classHidden="hidden";e.classShown="shown";e.video_button=false;e.search_button=false;e.room_name="Room Name";e.room_description="Room Description";e.genre="Genre";e.artists="Artists";e.current_song="Current Song";e.song_title="Song Title";e.artist="Artist";e.room_recommendations="Room Recommendations"}e.launch=function(t,i){a();e.classHidden="shown";e.classShown="hidden";o.launchPlayer(t.id,t.title);if(i){o.archiveVideo(t)}n.info("Launched id:"+t.id+" and title:"+t.title)};e.nextPageToken="";e.label="You haven't searched for any video yet!";e.loading=false;e.search=function(i){r();e.classHidden="hidden";e.classShown="shown";e.loading=true;t.get("https://www.googleapis.com/youtube/v3/search",{params:{key:"AIzaSyBJmqwVRUJUXd2QZD1agSvI0B5DzYbiKuc",type:"video",maxResults:"10",pageToken:i?"":e.nextPageToken,part:"id,snippet",fields:"items/id,items/snippet/title,items/snippet/description,items/snippet/thumbnails/default,items/snippet/channelTitle,nextPageToken",q:this.query}}).success(function(t){if(t.items.length===0){e.label="No results were found!"}o.listResults(t,e.nextPageToken&&!i);e.nextPageToken=t.nextPageToken;n.info(t)}).error(function(){n.info("Search error")}).finally(function(){e.loadMoreButton.stopSpin();e.loadMoreButton.setDisabled(false);e.loading=false})};e.show_video=function(){a();console.log("show_video function called");e.classHidden="shown";e.classShown="hidden"};e.show_search=function(){r();console.log("show_search function called");e.classHidden="hidden";e.classShown="shown"};function r(){e.search_button=false;e.video_button=true}function a(){e.search_button=true;e.video_button=false}}})();
=======
var app=angular.module("TuneBox",["ngResource","ngRoute"]);app.config(["$routeProvider",function(o){o.when("/",{templateUrl:"partials/home.view.html",controller:"homeCtrl"}).when("/register",{templateUrl:"partials/register.view.html",controller:"registerCtrl"}).when("/login",{templateUrl:"partials/login.view.html",controller:"loginCtrl"}).when("/room",{templateUrl:"partials/room.html"}).when("/create-room",{templateUrl:"partials/create-room.html",controller:"roomcreationCtrl"}).otherwise({redirectTo:"/"})}]);(function(){angular.module("TuneBox").controller("homeCtrl",o);o.$inject=["$scope","authentication"];function o(o,e){}})();(function(){angular.module("TuneBox").controller("registerCtrl",o);o.$inject=["$scope","authentication","$location"];function o(o,e,n){if(e.isLoggedIn()){n.path("/")}o.register=function(){e.register(o.user).success(function(o){n.path("/")}).error(function(e){o.error=e})}}})();(function(){angular.module("TuneBox").service("authentication",o);o.$inject=["$window","$http"];function o(o,e){var n=function(e){o.localStorage["tunebox-token"]=e};var t=function(){return o.localStorage["tunebox-token"]};var r=function(){o.localStorage.removeItem("tunebox-token")};var i=function(o){return e.post("api/login",o).success(function(o){n(o.token)})};var a=function(o){return e.post("api/register",o).success(function(o){n(o.token)})};var l=function(){var e=t();if(e){var n=JSON.parse(o.atob(e.split(".")[1]));return n.exp>Date.now()/1e3}else{return null}};var u=function(){if(l()){var e=t();var n=JSON.parse(o.atob(e.split(".")[1]));return n}else{return false}};return{saveToken:n,getToken:t,logout:r,login:i,register:a,isLoggedIn:l,getUserInfo:u}}})();(function(){angular.module("TuneBox").controller("loginCtrl",o);o.$inject=["$scope","authentication","$location"];function o(o,e,n){if(e.isLoggedIn()){n.path("/")}o.error="";o.login=function(){e.login(o.user).success(function(o){n.path("/")}).error(function(e){o.error=e.message})}}})();(function(){angular.module("TuneBox").controller("navigationCtrl",o);o.$inject=["$scope","authentication"];function o(o,e){if(info=e.getUserInfo()){o.showLogin=false;o.test="Current user: "+info.email}else{o.showLogin=true}o.logout=function(){e.logout();o.test="logged out!";o.showLogin=true}}})();(function(){angular.module("TuneBox").controller("roomcreationCtrl",o);o.$inject=["$scope","authentication","$location","roomService"];function o(o,e,n,t){if(!e.isLoggedIn()){n.path("/")}o.createRoom=function(){var r=e.getUserInfo().email;o.room.admin=r;t.createRoom(o.room).success(function(o){n.path("/")}).error(function(o){console.log(o)})}}})();(function(){angular.module("TuneBox").service("roomService",o);o.$inject=["$window","$http"];function o(o,e){var n=function(o){return e.post("api/createRoom",o).success(function(o){console.log(o)})};return{createRoom:n}}})();
>>>>>>> 921e1ab58bc3cf5b572a3725edd661e232def7f5
